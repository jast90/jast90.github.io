---
layout: post
title: '缓存雪崩、穿透、击穿'
description: '缓存雪崩、穿透、击穿'
date: '2020-5-16 08:29:00'
author: Jast
---

### 雪崩

#### 概念

高并发请求多个key，此时多个key同时失效、不在缓存中，请求全部打到数据库，使数据库无法处理这么多的连接，导致数据库死机

### 如何避免

- 防止多个key同时过期，设置随机的过期时间
- 不设置过期时间，有更新时更新维护到最新

### 穿透

#### 概念

请求数据在缓存和数据库中都不存在，大量请求打到缓存和数据库，造成缓存和数据库处理大量请求导致服务器死机

#### 如何避免

- 不查库的参数校验，过滤掉非法数据
- 不存在的数据，在缓存中存放默认值表示数据不存在，通过缓存来减少数据库请求量
- 使用布隆过滤器来判断一个记录是否存在

### 击穿

#### 概念
高并发请求一个key，此时该key过期、不存在缓存中，大量并发请求打到数据库，造成数据库死机

#### 如何避免

- 缓存不过期
- 互斥锁

### 区别

- 雪崩是多个key同时过期，而打到数据库；
- 穿透是key既打到缓存又打到数据库；
- 击穿是大并发请求单个key，造成缓存和数据库都处理大量请求
