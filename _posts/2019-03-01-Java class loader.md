---
layout: bootstrap
title: 'Java 类加载'
description: 'Java Class loader'
date: '2019-03-01 18:07:00'
author: Jast
---
# 类在什么时候被加载？
类初始化的时候一定会被加载，类初始化的情形有：  
1. new,读取、设置静态变量、调用静态方法
2. java.lang.reflect包的方法
3. 加载一个类时，父类还未加载时，先加载父类
4. 虚拟机启动时，需要指定一个要执行的主类，先加载这个主类


# 什么是类加载器？
就是在特定的目录中查找class文件，并根据class文件创建Class对象。

# 默认加载器如何加载类？如何使用自定义类加载器加载类？
启动类加载器（Bootstrap ClassLoader）：会在<JAVA_HOME>\lib目录中查找jar包中的class文件并创建Class对象；
扩展类加载器（Extension Classloader）：会在<JAVA_HOME>\lib\ext目录中查找jar包中的class文件并创建Class对象；
应用程序类加载器（Application Classloader）：负责加载用户路径（ClassPath）上所指定的jar包中的class文件并创建Class对象。

# 何为类加载器的双亲委派模型？
一个类加载器收到了类加载的请求，都是先委派给父 类加载器，每一层都是如此，因此所有的加载请求最终都会到达启动类加载器，只有当父类加载器反馈自己无法完成该类加载时，子类加载器才会自己尝试加载，如果都没有加载到则抛出异常。
正常的流程就是：应用程序类加载器收到加载类请求，委托给扩展类加载器加载类；委托给扩展类加载器收到加载类请求，委托给启动器加载器；启动器加载器能够加载直接加载，不能加载交给扩展类加载器加载；扩展类加载器加载能够加载就直接加载，扩展类加载器加载不能加载交给应用程序类加载器加载；