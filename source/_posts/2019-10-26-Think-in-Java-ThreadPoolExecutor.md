---
layout: post
title: 'Java ThreadPoolExecutor 源码分析'
description: 'Think in Java ThreadPoolExecutor'
date: '2019-10-26 15:56:00'
author: Jast
---

### 提交任务
~~如果工作线程数量小于核心线程数的，会尝试创建一个新的核心工作者线程来运行该任务；如果工作者线程数大于核心线程数并且小于到最大核心线程数并且可以入队并时，会会继续创建一个工作者线程来运行队列中的任务；如果不能入队则采用相关的丢弃策略来丢弃任务。~~

### 工作者线程
工作者线程先运行当前设置的任务，如果未设置任务的话就去阻塞队列中获取一个任务来运行，工作者线程会一直从队列阻塞队列中获取任务，直到队列中没有没有任务可以被执行时。

属性：

线程:运行工作者线程的任务即`Worker.run()`

第一个任务：工作线程的第一个任务。

原理：

工作者线程包含了一个线程和一个任务，工作者线程本身是一个任务，该任务的功能是运行工作线程自己的任务和阻塞队列中的任务，而工作者线程中的线程是执行工作者线程中的任务的，在调用addWorker的时候会启动工作者线程中的线程来运行工作者线程中的任务的。
